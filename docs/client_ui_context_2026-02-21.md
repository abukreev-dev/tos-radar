# Клиентский веб-интерфейс: зафиксированный контекст

Дата фиксации: 2026-02-21
Статус: Q/A closed (достаточно для старта реализации v1)
Точка продолжения: интервью остановлено по решению команды

## 1) Продуктовая модель клиента

- Клиент работает только с проверенным каталогом сервисов.
- Добавление URL клиентом отсутствует: сервисы заводит только админ.
- Подключение сервиса клиентом: по одному (`Подключить`).
- Расписание проверок фиксированное: 1 раз в сутки.
- Доступ клиента: приватный кабинет (без публичных страниц).
- Командный доступ отсутствует: 1 пользователь = 1 аккаунт.

## 2) Навигация и разделы

- Разделы v1: `Дашборд`, `Каталог`, `Мои сервисы`, `Изменения`, `Тариф/Биллинг`, `Профиль`.
- Desktop: sidebar.
- Mobile: нижний tab-bar = `Каталог`, `Мои`, `Изменения`, `Биллинг`.
- На mobile `Дашборд` и `Профиль` открываются через `Еще`.
- После логина: переход на `Дашборд`.

## 3) Тарифы и лимиты

- Лимиты показываются одновременно: общий + по тематикам.
- При достижении лимитов: блокировка действия + апселл.
- Тарифы:
  - Free: лимиты по тематикам, ограничения на фичи.
  - Paid 30: общий лимит 30 URL.
  - Paid 100: общий лимит 100 URL.
- Клиент удаляет сервисы (без режима pause).
- Удаление мгновенное; слот лимита освобождается сразу.
- Повторное подключение после удаления — сразу (без cooldown).

## 4) Ограничения и доступ по тарифам

- `FAILED` события на Free не показываются.
- KPI `FAILED` на Free скрыт.
- История версий (до 50) доступна только на платных.
- Для Free: доступны diff-события, но без просмотра версий документов.
- Diff (подсветка удалено/добавлено) доступен всем тарифам.
- Ограничения Free в UI явно не акцентируются отдельными paywall-лейблами.

## 5) Каталог

- Показываем весь каталог, недоступные помечаются логикой paywall по действию.
- Поиск: по названию и домену.
- Сортировок в v1 нет.
- Social proof: диапазоны (например, `100+`), показываем всем.
- Отзывы/рейтинги: нет.
- Карточки одинаковой высоты.
- Есть внешняя ссылка `Открыть источник` в новой вкладке.
- Отдельной страницы каталожного сервиса нет (только карточка).
- Навигация списка: infinite scroll.
- Desktop: sticky фильтры/поиск.
- Mobile: фильтры через кнопку и bottom sheet.
- Mobile filters: `Применить` + `Сбросить`.
- Для лимитных сервисов кнопка `Подключить` активна, при клике открывается paywall.

## 6) Рекомендации

- Есть блок `Рекомендовано для вас`.
- Показываем 10 карточек.
- Если не хватает по тематике: добиваем популярными.
- Ранжирование: сначала совпадение тематики, внутри — популярность.
- Onboarding-попап тематики: опциональный, закрываемый.

## 7) Дашборд

- KPI за 24ч: подключено, CHANGED, FAILED, лимиты (с учетом тарифных правил).
- На Free KPI FAILED скрыт.
- Есть блок `Последние изменения` на 5 событий.
- Клик по событию в мини-ленте ведет в `Изменения`.
- Индикатор `последнее обновление` только на дашборде.
- Формат времени: абсолютное + относительное.

## 8) Мои сервисы

- Виды: переключатель таблица/карточки.
- По умолчанию: карточки.
- Primary на карточке: `Подробнее`.
- Удаление внутри деталей сервиса (danger zone внизу).
- Отдельная страница деталей сервиса есть.
- В деталях: базовая инфо + последние 10 изменений.
- Кнопки `Смотреть все изменения` в деталях нет.
- Блока `Похожие сервисы` нет.

## 9) Изменения

- История: вся доступная, с пагинацией.
- Страница по умолчанию: 20, переключатель 20/50/100.
- Фильтры (v1): период + сервис.
- Поиск есть (название/домен).
- Сортировка по умолчанию: новые сверху.
- Бейдж уровня (`NOISE/MINOR/MAJOR`) показываем всегда.
- Цветовой код уровней не используем (только текст).
- На desktop и mobile — карточки.
- Модалка diff открывается из списка.
- Desktop: в модалке next/prev есть.
- Mobile: закрытие по крестику + свайп вниз.
- Deep-link для открытия конкретной модалки diff в v1 нет.
- Пустая выдача по фильтрам: CTA `Сбросить фильтры`.
- Счетчик `Найдено N` не показываем.
- Максимум ручного периода за запрос: 90 дней; при превышении блокируем выбор в UI.

## 10) Уведомления

- Каналы: email + Telegram.
- Управляет клиент в профиле.
- События: только `CHANGED`.
- Формат: ежедневный дайджест, не instant.
- Дайджест: плоский список событий.
- Если изменений нет, письмо не отправляется.
- Время дайджеста: 09:00 по timezone профиля.
- Дни отправки: каждый день.
- В дайджест попадают только текущие подключенные сервисы.
- Для Telegram:
  - подключение через бот + одноразовый код;
  - если не подключен — блокирующий flow перед включением;
  - при отвязке все Telegram-переключатели сбрасываются;
  - в профиле виден полный статус связки + `Отвязать`.
- Переключатели типов уведомлений:
  - Email: `Дайджест` + `Маркетинг/новости`.
  - Telegram: `Дайджест` + `Системные`.

## 11) Аутентификация и аккаунт

- Регистрация: self-signup email+password + подтверждение email.
- Google login: включен.
- Google auto-signup: включен.
- Если email из Google неподтвержден: нужен наш verify flow.
- Связка Google с существующим email-аккаунтом: автоматическая.
- Язык по умолчанию (email и Google): `ru`.
- Пароль: минимум 8 символов, буква + цифра.
- Ротации пароля по сроку нет.
- Forgot password: есть, после смены пароля logout всех сессий.
- Срок сессии: 90 дней, без idle-timeout.
- `Запомнить меня`: отключено (не используется).
- Критические действия требуют подтверждения (пароль/re-auth).
- Для Google-only критические действия подтверждаются re-auth Google.

## 12) Профиль и настройки

- Язык: RU/EN.
- Переключатель языка в `Профиль` (не в глобальной шапке).
- Время: настройка `локальное/UTC` + дефолт `Europe/Moscow`.
- Публичные персональные поля (имя/компания) в v1 не редактируются.
- API keys в v1 нет.
- `Сессии и устройства` в v1 нет.
- Dark mode нет, плотность интерфейса фиксированная.
- Профильные разделы — отдельные страницы.
- Вход в профильные разделы: через единый пункт `Профиль`.

## 13) Биллинг

- В v1 в кабинете есть биллинг + история платежей/документы.
- Месячный и годовой циклы.
- Смена тарифа:
  - upgrade: сразу с proration;
  - downgrade: со следующего периода.
- При downgrade сверх лимита: автоотключение лишних + предупреждение.
- Правило автоотключения: LIFO.
- Доп. правило: сначала отключаем архивные, потом LIFO по активным.
- Уведомление об автоотключении: история аккаунта + email/Telegram.
- В уведомлении CTA: `Повысить тариф` -> `Тариф/Биллинг` с предвыбором.
- Сравнение тарифов: таблица (10+ строк), mobile часть строк под `Подробнее`.
- Валюта: RUB.
- Цены: “включая НДС”.

### Платежи на первом этапе

- До YooKassa: только `Тестовый баланс`.
- При нехватке баланса: ошибка + CTA `Пополнить у админа`.
- Баланс показывается и в шапке, и в `Тариф/Биллинг`.
- Алерт низкого баланса: нет.
- При неуспешном списании автопродления: сразу перевод в Free.
- После автоперехода в Free: persistent баннер на `Дашборд` и `Тариф/Биллинг`.
- `Восстановить тариф`: открытие биллинга с предвыбранным прежним тарифом.
- После восстановления тарифа ранее отключенные сервисы автоматически не возвращаем; пользователь идет в каталог.
- После оплаты показываем одноразовый информер с CTA `Открыть каталог`.

## 14) Email verify / lifecycle

- До подтверждения email: доступ только в рамках Free (с подключениями по free-лимитам).
- Покупка тарифа до verify запрещена.
- При попытке покупки без verify: блок + CTA `Подтвердить email`.
- Повтор verify email: не чаще 60 сек, лимит 10/сутки.
- TTL verify ссылки: 48 часов.
- Просроченная ссылка: экран + `Отправить снова`.

## 15) Удаление аккаунта

- Self-service удаление включено.
- Soft delete: 30 дней, затем hard delete.
- В период soft delete вход блокируется обычным доступом и показывается экран восстановления.
- На экране: дата удаления + кнопка `Восстановить аккаунт`.
- Восстановление: в 1 клик (без доп. шага).
- На старте soft delete отправляется подтверждающее письмо.
- Привязки сервисов держим 30 дней и при восстановлении возвращаем полностью.
- Если прежний тариф архивирован: переводим в Free.

## 16) Поддержка и информирование

- Раздел `Поддержка` есть.
- Формы обращений нет.
- В `Поддержка`: контакты email + Telegram + FAQ-блок.
- Глобальный админ-баннер в шапке есть; пользователь скрыть не может.

## 17) Важные корректировки в ходе сессии

- #46 изменен на вариант 1 (desktop sidebar + mobile bottom nav).
- #112 изменен на вариант 1 (покупка только после verify email).
- #165 изменен на вариант 2 (без `Запомнить меня`).
- #220 изменен на вариант 2 (без мастера восстановления сервисов).
- #224 подтвержден вариант 3 (paywall при клике `Подключить` на лимитном сервисе).
- #228 скорректирован на вариант 1 (inline retry).
- #229 подтвержден вариант 2 (использовать backend текст ошибки).
- #237 подтвержден вариант 1 (в v1 только Telegram; Slack/Webhook/Zapier после v1).
- #238 подтвержден вариант 2 (интеграции управляются только в `Профиль -> Уведомления`, без отдельного раздела).
- #239 подтвержден вариант 1 (flow привязки Telegram запускается только из `Профиль -> Уведомления`).
- #240 подтвержден вариант 1 (при потере связи Telegram-тумблеры автосбрасываются + inline-ошибка с CTA `Переподключить`).
- #241 подтвержден вариант 1 (кнопка `Отправить тест` в `Профиль -> Уведомления` с rate limit).
- #242 подтвержден вариант 1 (rate limit тестового Telegram ping: 1/60 сек, максимум 20/сутки).
- #243 подтвержден вариант 2 (история отправок Telegram-уведомлений в кабинете не нужна).
- #244 подтвержден вариант 1 (при сбое ежедневного дайджеста показываем alert в `Профиль -> Уведомления` с причиной и CTA `Повторить позже`).
- #245 подтвержден вариант 2 (по кнопке `Повторить позже` не запускаем retry; alert скрывается до следующего планового окна).
- #246 подтвержден вариант 1 (в UI показываем `Следующая отправка: завтра в 09:00` по timezone профиля).
- #247 подтвержден вариант 1 (если timezone не задан/невалиден, fallback `Europe/Moscow` + inline-подсказка).
- #248 подтвержден вариант 1 (в подсказке есть CTA `Изменить`, ведет в `Профиль -> Время`).
- #249 подтвержден вариант 1 (в v1 нет тихого периода; дайджест всегда по расписанию 09:00 timezone профиля).
- #250 подтвержден вариант 1 (в v1 нет предпросмотра письма дайджеста в интерфейсе).
- #251 подтвержден вариант 1 (в v1 частота дайджеста не настраивается; только ежедневный режим).
- #252 подтвержден вариант 1 (в v1 нет ручной кнопки `Отправить дайджест сейчас`; только плановая отправка).
- #253 подтвержден вариант 1 (email-дайджест доступен только при подтвержденном email).
- #254 подтвержден вариант 1 (при недоступности email-дайджеста показываем inline-причину + CTA `Подтвердить email`).
- #255 подтвержден вариант 2 (разрешаем отключить все каналы, но показываем мягкое предупреждение).
- #256 подтвержден вариант 1 (статус последней отправки дайджеста показывается только в `Профиль -> Уведомления`).
- #257 подтвержден вариант 1 (в v1 нет отдельного лога email-ошибок; только общий статус канала).
- #258 подтвержден вариант 1 (при hard-bounce автосброс email-канала + alert с CTA сменить email).
- #259 подтвержден вариант 1 (после смены email email-дайджест автосбрасывается до нового verify).
- #260 подтвержден вариант 1 (из `Уведомления` доступен resend verify с rate-limit).
- #261 подтвержден вариант 1 (приоритетного канала нет; отправляем в оба включенных канала).
- #262 подтвержден вариант 1 (для подключенного Telegram с выключенным дайджестом показываем нейтральный статус).
- #263 подтвержден вариант 1 (после первого подключения сервиса показываем одноразовый ненавязчивый onboarding-хинт).
- #264 подтвержден вариант 1 (onboarding-хинт показывается на `Дашборд` после первого подключения сервиса).
- #265 подтвержден вариант 1 (хинт можно закрыть без включения уведомлений, повторно не мешает).
- #266 подтвержден вариант 1 (повторного показа хинта нет; только один раз на аккаунт).
- #267 подтвержден вариант 1 (на mobile используем компактный inline-баннер).
- #268 подтвержден вариант 1 (доп. переключатель `Не показывать снова` не нужен).
- #269 подтвержден вариант 1 (Telegram-дайджест разрешен без verify email).
- #270 подтвержден вариант 1 (в v1 нет отдельного мастера; только `Профиль -> Уведомления`).
- #271 подтвержден вариант 1 (добавляем ненавязчивый индикатор `Уведомления настроены не полностью` в профиле).
- #272 подтвержден вариант 1 (при выключенных каналах показываем компактную CTA `Включить уведомления` на `Дашборд`).
- #273 подтвержден вариант 1 (из verify email даем deep-link в `Профиль -> Уведомления` после подтверждения).
- #274 подтвержден вариант 1 (индикатор `Уведомления настроены не полностью` показывается в `Профиль` рядом с пунктом `Уведомления`).
- #275 подтвержден вариант 1 (индикатор имеет нейтральный/info-приоритет, без тревожной семантики).
- #276 подтвержден вариант 1 (индикатор скрывается при включенном хотя бы одном канале и отсутствии блокирующих ошибок).
- #277 подтвержден вариант 1 (при блокирующей ошибке индикатор остается и показывает конкретную причину).
- #278 подтвержден вариант 1 (в v1 счетчик проблем у пункта `Уведомления` не показываем).
- #279 подтвержден вариант 2 (действие `закрыл onboarding-хинт` в аналитику не логируем).
- #280 подтвержден вариант 2 (событие `включил первый канал уведомлений` в аналитику не добавляем).
- #281 подтвержден вариант 1 (в v1 нет экспорта списка изменений).
- #282 подтвержден вариант 1 (в v1 нет bulk-action в `Мои сервисы`; удаление только по одному).
- #283 подтвержден вариант 1 (в v1 нет отдельного раздела `Архив сервисов`).
- #284 подтвержден вариант 2 (фильтр `только с изменениями` в `Мои сервисы` не добавляем).
- #285 подтвержден вариант 2 (фильтр по статусу `ACTIVE/FAILED` в `Мои сервисы` не добавляем).
- #286 подтвержден вариант 2 (сортировки в `Мои сервисы` в v1 не добавляем).
- #287 подтвержден вариант 3 (дефолтный порядок в `Мои сервисы` — по дате подключения).
- #288 подтвержден вариант 1 (в v1 нет pin/favorite сервисов).
- #289 подтвержден вариант 1 (поиск в `Мои сервисы` по названию/домену обязателен).
- #290 подтвержден вариант 1 (для empty-state `Мои сервисы` показываем CTA `Открыть каталог`).
- #291 подтвержден вариант 1 (в v1 заметки к сервисам отсутствуют).
- #292 подтвержден вариант 1 (в карточке сервиса есть быстрый переход `Последнее изменение`, если доступно).
- #293 подтвержден вариант 2 (mini-health индикатор сервиса в карточке не показываем).
- #294 подтвержден вариант 1 (бейдж `Новый` для недавно подключенного сервиса показывается 7 дней).
- #295 подтвержден вариант 1 (дата подключения показывается в карточке компактно под названием).
- #296 подтвержден вариант 1 (в карточке `Мои сервисы` сохраняем внешний линк `Открыть источник`).
- #297 подтвержден вариант 1 (удаление сервиса через confirm-модалку с названием сервиса).
- #298 подтвержден вариант 1 (undo после удаления в v1 не добавляем; удаление финальное).
- #299 подтвержден вариант 2 (статус `Архивный сервис` в карточке не показываем).
- #300 подтвержден вариант 2 (фильтр `автоотключенные` в `Мои сервисы` не добавляем).
- #301 подтвержден вариант 2 (onboarding для раздела `Изменения` не добавляем).
- #302 подтвержден вариант 2 (легенду уровней `NOISE/MINOR/MAJOR` в интерфейсе не показываем).
- #303 подтвержден вариант 2 (фильтр по `change_level` в v1 не добавляем).
- #304 подтвержден вариант 1 (2FA в v1 не внедряем; переносим после v1).
- #305 подтвержден вариант 1 (при множественных неудачных входах используем мягкий rate-limit + сообщение `Попробуйте позже`).
- #306 подтвержден вариант 1 (пользовательский audit log критических действий в v1 не добавляем).
- #307 подтвержден вариант 2 (блок `Юридические согласия` в профиле в v1 не добавляем).
- #308 подтвержден вариант 2 (cookie/analytics consent-баннер в кабинете в v1 не добавляем).
- #309 подтвержден вариант 2 (формальный baseline доступности для v1 не фиксируем).
- #310 подтвержден вариант 1 (отдельную страницу `Что нового` в v1 не добавляем).
- #311 подтвержден вариант 1 (при неполном переводе используем автоfallback на RU без техметок).
- #312 помечен как дубль ранее заданного вопроса (пропущен в текущем цикле).
- #313 помечен как дубль ранее заданного вопроса (пропущен в текущем цикле).
- #314 подтвержден вариант 1 (раздел `API/Webhooks` для клиентов переносим после v1).
- #315 подтвержден вариант 2 (страницу `Статус системы` в кабинете в v1 не добавляем).
- #316 подтвержден вариант 1 (in-app центр уведомлений/колокольчик в v1 не добавляем).
- #317 подтвержден вариант 1 (logout всех сессий после смены пароля выполняется автоматически без доп. подтверждения).
- #318 подтвержден вариант 1 (в v1 формат времени фиксируем 24h).
- #319 подтвержден вариант 1 (на `Дашборде` есть компактный скрываемый onboarding-чеклист).
- #320 подтвержден вариант 2 (причину `FAILED` в карточке сервиса в v1 не показываем).
- #321 подтвержден вариант 2 (retry из UI для `FAILED` в `Мои сервисы` в v1 не добавляем).
- #322 подтвержден вариант 1 (глобальный поиск по кабинету в v1 не добавляем).
- #323 подтвержден вариант 1 (вводим унифицированный экран `403/доступ ограничен тарифом` с CTA `Тариф/Биллинг`).
- #324 подтвержден вариант 1 (в кабинете есть унифицированный экран `404` с CTA `На дашборд`).
- #325 подтвержден вариант 1 (для `500` показываем отдельный экран с коротким ID ошибки для поддержки).
- #326 подтвержден вариант 2 (frontend-ошибки в `v1` централизованно не логируем).
- #327 подтвержден вариант 3 (для долгих операций используем только spinner, без статус-плашки).
- #328 подтвержден вариант 2 (autosave в `Профиль -> Уведомления` не добавляем; используем кнопку `Сохранить`).
- #329 подтвержден вариант 1 (при ошибке сохранения показываем inline-ошибку + действие `Повторить`).
- #330 подтвержден вариант 1 (во время сохранения блокируем повторные клики по контролам).
- #331 подтвержден вариант 1 (используем единый компонент confirm-модалки для danger-действий).
- #332 подтвержден вариант 1 (вводим стандартизованный inline/paywall-паттерн для `нет доступа по тарифу`).
- #333 подтвержден вариант 2 (UTM/source tracking при переходах в `Тариф/Биллинг` в v1 не добавляем).
- #334 подтвержден вариант 1 (отдельный раздел `Безопасность` в профиле в v1 не добавляем).
- #335 подтвержден вариант 1 (явную кнопку `Выйти со всех устройств` в v1 не добавляем).
- #336 подтвержден вариант 1 (показ `последний вход: время/IP/устройство` переносим после v1).
- #337 подтвержден вариант 1 (для удаления аккаунта используем отдельный экран с коротким чеклистом и подтверждением).
- #338 подтвержден вариант 1 (email-уведомление о смене пароля отправляется обязательно).
- #339 подтвержден вариант 1 (при смене email отправляем уведомления на старый и новый адрес).
- #340 подтвержден вариант 1 (после подтверждения удаления действует soft-delete 30 дней, без доп. паузы в UI).
- #341 подтвержден вариант 1 (в период soft-delete доступ только к экрану восстановления).
- #342 подтвержден вариант 1 (реферальный функционал переносим после v1).
- #343 подтвержден вариант 1 (in-app форма `Сообщить об ошибке` в v1 не добавляется; только каналы поддержки).

## 18) Нерешенное / next

- Последний обработанный номер: #343 (безопасность, удаление аккаунта и рефералка зафиксированы для v1).
- Интервью остановлено: новые вопросы не задаем.
